syntax = "proto3";

import "google/protobuf/timestamp.proto";

option go_package = "./;binanceproto";

service binance {
    rpc ListAllAssetPairs (ListAllAssetPairsRequest) returns (ListAllAssetPairsResponse) {}

    rpc ExecuteFuturesPerpetualsTrade (ExecuteFuturesPerpetualsTradeRequest) returns (ExecuteFuturesPerpetualsTradeResponse) {}

    rpc GetLatestPrice (GetLatestPriceRequest) returns (GetLatestPriceResponse) {}

    rpc VerifyCredentials (VerifyCredentialsRequest) returns (VerifyCredentialsResponse) {}

    rpc GetStatus (GetStatusRequest) returns (GetStatusResponse) {}
}

message AssetPair {
    string symbol = 1;
    string base_asset = 2;
    string quote_asset = 3;
    bool with_spot_trading = 4;
    bool with_margin_trading = 5;
}

message ListAllAssetPairsRequest {}

message ListAllAssetPairsResponse {
    repeated AssetPair asset_pairs = 1;
}

message ExecuteFuturesPerpetualsTradeRequest {
    string trade_id = 1;
    string actor_id= 2;
    // TODO
    string TradeSide = 3;
    string asset = 4;
    string pair = 5;
    float entry = 6;
    float stop_loss = 7;
    repeated float take_profits = 8;
    google.protobuf.Timestamp timestamp = 9;
}

message ExecuteFuturesPerpetualsTradeResponse {}

message GetLatestPriceRequest{
    string symbol = 1;
}

message GetLatestPriceResponse{
    float price = 1;
    int64 timestamp = 2;
}

message Credentials {
    string api_key = 1;
    string secret_key = 2;
}

message VerifyCredentialsRequest {
    Credentials credentials = 1;
    string user_id = 2;
}

message VerifyCredentialsResponse {
    bool success = 1;
    bool read_enabled = 2;
    bool futures_enabled = 3;
    bool withdraw_enabled = 4;
    bool spot_enabled = 5;
    bool options_enabled = 6;
    bool ip_restrictions = 7;
    string reason = 8;
}

message GetStatusRequest {}

message GetStatusResponse {
    // The time recorded by the server on Binances side.
    int64 server_time = 1;
    // The time it took to receive the request response
    int64 request_latency = 2;
    // The assumed clock drift between the client & the server time
    int64 assumed_clock_drift = 3;
}
